{"version":3,"sources":["components/Header.js","components/Footer.js","reducer.js","context.js","components/Preloader.js","components/GoodsItem.js","components/GoodsList.js","components/Cart.js","components/CartItem.js","components/CartList.js","components/Alert.js","components/Shop.js","config.js","App.js","index.js"],"names":["Header","className","href","id","target","rel","Footer","Date","getFullYear","reducer","state","type","payload","goods","loading","itemIndex","order","findIndex","orderItem","mainId","newOrder","newItem","quantity","map","index","alertName","displayName","newQuantity","n","isCartShow","filter","el","ShopContext","createContext","initialState","ContextProvider","children","useReducer","value","dispatch","addToCart","item","changeQuantity","itemId","removeFromCart","handleCartShow","closeAlert","setGoods","data","Provider","Preloader","GoodsItem","props","displayDescription","price","finalPrice","useContext","src","displayAssets","background","alt","onClick","style","fontSize","GoodsList","length","Cart","CartItem","CartList","totalPrice","reduce","sum","Alert","name","useEffect","timerId","setTimeout","clearTimeout","Shop","fetch","headers","Authorization","process","then","response","json","shop","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.30283eb0.chunk.js","sourcesContent":["function Header() {\r\n  return (\r\n    <nav className=\"cyan\">\r\n      <div className=\"nav-wrapper\">\r\n        <a href=\"/\" className=\"brand-logo\">\r\n          Fortnite Shop\r\n        </a>\r\n        <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n          <li>\r\n            <a href=\"https://github.com/AnthonyGr/fortnite-shop--udemy-course--react\" target=\"_blank\" rel=\"noreferrer\">\r\n              Repo\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","function Footer() {\r\n  return (\r\n    <footer className=\"page-footer cyan\">\r\n      <div className=\"footer-copyright\">\r\n        <div className=\"container\">\r\n          © {new Date().getFullYear()} Fortnite Shop\r\n          <a\r\n            className=\"grey-text text-lighten-4 right\"\r\n            href=\"https://github.com/AnthonyGr/fortnite-shop--udemy-course--react\"\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            Repo\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","export function reducer(state, { type, payload }) {\r\n  switch (type) {\r\n    case 'SET_GOODS':\r\n      return {\r\n        ...state,\r\n        goods: payload || [],\r\n        loading: false,\r\n      };\r\n    case 'ADD_TO_CART': {\r\n      const itemIndex = state.order.findIndex((orderItem) => orderItem.mainId === payload.mainId);\r\n      let newOrder = null;\r\n      if (itemIndex < 0) {\r\n        const newItem = {\r\n          ...payload,\r\n          quantity: 1,\r\n        };\r\n        newOrder = [...state.order, newItem];\r\n      } else {\r\n        newOrder = state.order.map((orderItem, index) => {\r\n          if (index === itemIndex) {\r\n            return {\r\n              ...orderItem,\r\n              quantity: orderItem.quantity + 1,\r\n            };\r\n          } else {\r\n            return orderItem;\r\n          }\r\n        });\r\n      }\r\n      return {\r\n        ...state,\r\n        order: newOrder,\r\n        alertName: payload.displayName,\r\n      };\r\n    }\r\n    case 'CHANGE_QUANTITY':\r\n      return {\r\n        ...state,\r\n        order: state.order.map((orderItem) => {\r\n          if (orderItem.mainId === payload.id) {\r\n            const newQuantity = orderItem.quantity + payload.n;\r\n            return {\r\n              ...orderItem,\r\n              quantity: newQuantity >= 0 ? newQuantity : 0,\r\n            };\r\n          } else {\r\n            return orderItem;\r\n          }\r\n        }),\r\n      };\r\n    case 'HANDLE_CART_SHOW':\r\n      return {\r\n        ...state,\r\n        isCartShow: !state.isCartShow,\r\n      };\r\n    case 'CLOSE_ALERT':\r\n      return {\r\n        ...state,\r\n        alertName: '',\r\n      };\r\n    case 'REMOVE_FROM_CART':\r\n      return {\r\n        ...state,\r\n        order: state.order.filter((el) => el.mainId !== payload.id),\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { createContext, useReducer } from 'react';\r\nimport { reducer } from './reducer';\r\n\r\nexport const ShopContext = createContext();\r\n\r\nconst initialState = {\r\n  goods: [],\r\n  loading: true,\r\n  order: [],\r\n  isCartShow: false,\r\n  alertName: '',\r\n};\r\n\r\nexport const ContextProvider = ({ children }) => {\r\n  const [value, dispatch] = useReducer(reducer, initialState);\r\n\r\n  value.addToCart = (item) => {\r\n    dispatch({ type: 'ADD_TO_CART', payload: item });\r\n  };\r\n\r\n  value.changeQuantity = (n, itemId) => {\r\n    dispatch({ type: 'CHANGE_QUANTITY', payload: { n: n, id: itemId } });\r\n  };\r\n\r\n  value.removeFromCart = (itemId) => {\r\n    dispatch({ type: 'REMOVE_FROM_CART', payload: { id: itemId } });\r\n  };\r\n\r\n  value.handleCartShow = () => {\r\n    dispatch({ type: 'HANDLE_CART_SHOW' });\r\n  };\r\n\r\n  value.closeAlert = () => {\r\n    dispatch({ type: 'CLOSE_ALERT' });\r\n  };\r\n\r\n  value.setGoods = (data) => {\r\n    dispatch({ type: 'SET_GOODS', payload: data });\r\n  };\r\n\r\n  return <ShopContext.Provider value={value}>{children}</ShopContext.Provider>;\r\n};\r\n","function Preloader() {\r\n  return (\r\n    <div className=\"progress\">\r\n      <div className=\"indeterminate\"></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Preloader;\r\n","import { useContext } from 'react';\r\nimport { ShopContext } from '../context';\r\n\r\nfunction GoodsItem(props) {\r\n  // TODO: Переписать деструктуризацию!\r\n  const { mainId, displayName, displayDescription } = props;\r\n  const price = props.price.finalPrice;\r\n\r\n  const { addToCart } = useContext(ShopContext);\r\n\r\n  return (\r\n    <div className=\"card\" id={mainId}>\r\n      <div className=\"card-image\">\r\n        <img src={props.displayAssets[0].background} alt={displayName} />\r\n      </div>\r\n      <div className=\"card-content\">\r\n        <span className=\"card-title\">{displayName}</span>\r\n        <p>{displayDescription}</p>\r\n      </div>\r\n      <div className=\"card-action\">\r\n        <button className=\"btn\" onClick={() => addToCart({ mainId, displayName, price })}>\r\n          Купить\r\n        </button>\r\n        <span className=\"right\" style={{ fontSize: '1.6rem' }}>\r\n          {price} руб.\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GoodsItem;\r\n","import { useContext } from 'react';\r\nimport { ShopContext } from '../context';\r\n\r\nimport GoodsItem from './GoodsItem';\r\n\r\nfunction GoodsList() {\r\n  const { goods = [] } = useContext(ShopContext);\r\n\r\n  if (!goods.length) {\r\n    return <h3>Nothing here</h3>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"goods\">\r\n      {goods.map((item) => (\r\n        <GoodsItem key={item.id} {...item} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GoodsList;\r\n","import { useContext } from 'react';\r\nimport { ShopContext } from '../context';\r\n\r\nfunction Cart() {\r\n  const { order, handleCartShow } = useContext(ShopContext);\r\n\r\n  const quantity = order.length;\r\n\r\n  return (\r\n    <div className=\"cart blue darken-2 white-text\" onClick={handleCartShow}>\r\n      <i className=\"material-icons\">shopping_cart</i>\r\n      {quantity ? <span className=\"cart-quantity\">{quantity}</span> : null}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Cart;\r\n","import { useContext } from 'react';\r\nimport { ShopContext } from '../context';\r\n\r\nfunction CartItem(props) {\r\n  const { mainId, displayName, quantity, price } = props;\r\n  const { removeFromCart, changeQuantity } = useContext(ShopContext);\r\n\r\n  return (\r\n    <li className=\"collection-item\">\r\n      {displayName} x{' '}\r\n      <i className=\"material-icons basket-quantity\" onClick={() => changeQuantity(-1, mainId)}>\r\n        remove\r\n      </i>\r\n      {quantity}\r\n      <i className=\"material-icons basket-quantity\" onClick={() => changeQuantity(1, mainId)}>\r\n        add\r\n      </i>{' '}\r\n      = {price * quantity}\r\n      <span className=\"secondary-content\">\r\n        <i className=\"material-icons basket-delete\" onClick={() => removeFromCart(mainId)}>\r\n          close\r\n        </i>\r\n      </span>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default CartItem;\r\n","import { useContext } from 'react';\r\nimport { ShopContext } from '../context';\r\n\r\nimport CartItem from './CartItem';\r\n\r\nfunction CartList() {\r\n  const { order = [], handleCartShow } = useContext(ShopContext);\r\n\r\n  const totalPrice = order.reduce((sum, el) => {\r\n    return sum + el.price * el.quantity;\r\n  }, 0);\r\n\r\n  return (\r\n    <ul className=\"collection cart-list\">\r\n      <li className=\"collection-item active\">Корзина:</li>\r\n      {order.length ? (\r\n        order.map((item) => <CartItem key={item.mainId} {...item} />)\r\n      ) : (\r\n        <li className=\"collection-item\">Корзина пуста</li>\r\n      )}\r\n      <li className=\"collection-item active\">\r\n        Общая стоимость: {totalPrice}\r\n        <button className=\"secondary-content btn-small\">Оформить</button>\r\n      </li>\r\n      <i className=\"material-icons basket-close\" onClick={handleCartShow}>\r\n        close\r\n      </i>\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default CartList;\r\n","import { useContext, useEffect } from 'react';\r\nimport { ShopContext } from '../context';\r\n\r\nfunction Alert() {\r\n  const { alertName: name = '', closeAlert } = useContext(ShopContext);\r\n\r\n  useEffect(() => {\r\n    const timerId = setTimeout(closeAlert, 3000);\r\n\r\n    return () => {\r\n      clearTimeout(timerId);\r\n    };\r\n    // eslint-disable-next-line\r\n  }, [name]);\r\n\r\n  return (\r\n    <div id=\"toast-container\">\r\n      <div className=\"toast\">{name} добавлен в корзину</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Alert;\r\n","import { useEffect, useContext } from 'react';\r\nimport { API_KEY, API_URL } from '../config';\r\n\r\nimport { ShopContext } from '../context';\r\n\r\nimport Preloader from './Preloader';\r\nimport GoodsList from './GoodsList';\r\nimport Cart from './Cart';\r\nimport CartList from './CartList';\r\nimport Alert from './Alert';\r\n\r\nfunction Shop() {\r\n  const { goods, loading, order, isCartShow, alertName, setGoods } = useContext(ShopContext);\r\n\r\n  useEffect(function getGoods() {\r\n    fetch(API_URL, {\r\n      headers: {\r\n        Authorization: API_KEY,\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      //Проверяем, что ответ пришел и сохраняем в goods\r\n      .then((data) => {\r\n        setGoods(data.shop);\r\n      });\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <main className=\"container content\">\r\n      <Cart quantity={order.length} />\r\n      {loading ? <Preloader /> : <GoodsList />}\r\n      {isCartShow && <CartList />}\r\n      {alertName && <Alert />}\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Shop;\r\n","const API_KEY = process.env.REACT_APP_API_KEY;\r\n\r\nconst API_URL = 'https://fortniteapi.io/v2/shop?lang=ru';\r\n\r\nexport { API_KEY, API_URL };\r\n","import Header from './components/Header';\nimport Footer from './components/Footer';\nimport Shop from './components/Shop';\nimport { ContextProvider } from './context';\n\nimport './App.css';\n\nfunction App() {\n  return (\n    <>\n      <Header />\n      <ContextProvider>\n        <Shop />\n      </ContextProvider>\n\n      <Footer />\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}